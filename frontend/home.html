<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">

  <title>Mason Formula Solver</title>
  <style>
    form {
      padding: 20px;
    }
  </style>

  <script type="text/javascript" src="index.js"></script>
  <script type="text/javascript" src="./graph.js"></script>
  <script type="text/javascript" src="https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js"></script>

</head>

<body>
  <nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Mason Formula Solver</a>

    </div>
  </nav>
  <div class="container">
    <div class="row">
      <div class="col py-4">




        <!-- Add node -->
        <div class="row mx-auto w-25">
          <button type="button" class="btn btn-primary" onclick="addNode()">Add Node</button>
        </div>
        <form class="row mt-3 gy-2 gx-3 align-items-center border border-2 border-success rounded">



          <!-- Add Edge -->
          <div class="col-auto input-group">
            <input type="text" class="form-control" id="edgeFrom" placeholder="edge from">
            <input type="text" class="form-control" id="edgeTo" placeholder="edge to">
            <input type="text" class="form-control" id="value" placeholder="edge value">
            <button type="button" class="btn btn-primary" onclick="addEdge()">Add Edge</button>
          </div>
        </form>

        <!-- Delete Node -->
        <form class="row mt-3 gy-2 gx-3 align-items-center border border-2 border-danger rounded">
          <div class="col-auto input-group">
            <input type="text" class="form-control" id="nodeToDelete" placeholder="node to delete">
            <button type="button" class="btn btn-primary" onclick="deleteNode()">Delete Node</button>
          </div>
        </form>

        <!-- Delete Edge -->
        <form class="row mt-3 gy-2 gx-3 align-items-center border border-2 border-danger rounded">
          <div class="col-auto input-group">
            <input type="text" class="form-control" id="edgeDeleteFrom" placeholder="edge from">
            <input type="text" class="form-control" id="edgeDeleteTo" placeholder="edge to">
            <button type="button" class="btn btn-primary" onclick="deleteEdge()">Delete Edge</button>
          </div>


        </form>

        <!-- Solve -->
        <div class="row mt-3 mx-auto w-25">
          <button type="button" class="btn btn-primary" onclick="solve()">Solve</button>
        </div>
      </div>


      <div class="col">
        <div id="mynetwork" class="my-5 h-75 border border-dark rounded"> </div>
      </div>
    </div>
    <br>
    <div class="container" style="text-align:center">
      Final result goes here
    </div>
  </div>
  <br>
  <div class="container" style="text-align:center">
    Final result goes here
  </div>
</div>
<script>
  
 // var dot="'digraph {node[shape=circle] ';+' ahs -> box[label="box", arrowhead=box]; \n'}";
 var dot="digraph {\n" +
  
  ' '+"}";
  var container = document.getElementById("mynetwork");
  var data = vis.parseDOTNetwork(dot);
  var network = new vis.Network(container, data);
 var data=[[]] 
  var counter=0;
  methods=new Method();
  graph=new Graph();
 
  function addEdge(){
   var from =document.getElementById("edgeFrom").value;
   var To =document.getElementById("edgeTo").value;
   var value=document.getElementById("value").value;
   if(methods.checkAvailability(from,To,dot)){
     graph.add_edge(from,To,value)
     dot=methods.adjustDot(from ,To,dot,value)
     draw(dot);   
   }
   else{
     alert("invalid path")
   }
 }
 function deleteEdge(){
  var from =document.getElementById("edgeDeleteFrom").value;
   var To =document.getElementById("edgeDeleteTo").value;
   dot=methods.deleteEdgeFromDot(from,To,dot);
   graph.remove_edge(from,To)
   draw(dot);
 }
 function deleteNode(){
  var node=document.getElementById("nodeToDelete").value;
  dot=methods.deleteNodeFromDot(dot,node);
  graph.remove_node(node)
  draw(dot);
 }
 function addNode(){
  console.log(dot);
  dot=methods.appendDot(counter,dot);
  graph.add_node(counter)
  counter++;
  console.log(dot);
  console.log(counter);
  //call draw
  draw(dot);
 }
 function draw(dotElement){
   console.log(dotElement)
  var container = document.getElementById("mynetwork");
  var data = vis.parseDOTNetwork(dotElement);
  var network = new vis.Network(container, data);
 }
function solve(){
  //call solving fn here

}

</script>
</body>

</html>